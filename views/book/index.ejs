<!DOCTYPE html>
<link href="/css/common.css" rel="stylesheet">
<link href="/css/luminous-basic.min.css" rel="stylesheet">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<html>
<head>
    <title>About</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light" style="flex-direction: column">
    <a class="navbar-brand" href="#">ランキング</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
                <a class="nav-link disabled" href="#">Disabled</a>
            </li>
        </ul>
    </div>
</nav>


<!--<nav class="navbar navbar-expand-lg navbar-light bg-light rounded gnav">-->
    <!--<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample10" aria-controls="navbarsExample10" aria-expanded="false" aria-label="Toggle navigation">-->
        <!--<span class="navbar-toggler-icon"></span>-->
    <!--</button>-->

    <!--<div class="collapse navbar-collapse justify-content-md-center" id="navbarsExample10">-->

        <!--<ul class="navbar-nav">-->
            <!--<li class="nav-item active">-->
                <!--<a class="nav-link" href="#">Centered nav only <span class="sr-only">(current)</span></a>-->
            <!--</li>-->
            <!--<li class="nav-item">-->
                <!--<a class="nav-link" href="#">Link</a>-->
            <!--</li>-->
            <!--<li class="nav-item">-->
                <!--<a class="nav-link disabled" href="#">Disabled</a>-->
            <!--</li>-->
            <!--<li class="nav-item dropdown">-->
                <!--<a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>-->
                <!--<div class="dropdown-menu" aria-labelledby="dropdown10">-->
                    <!--<a class="dropdown-item" href="#">Action</a>-->
                    <!--<a class="dropdown-item" href="#">Another action</a>-->
                    <!--<a class="dropdown-item" href="#">Something else here</a>-->
                <!--</div>-->
            <!--</li>-->
        <!--</ul>-->
    <!--</div>-->
<!--</nav>-->



<div class="container-fluid">
    <%
    __.times(ranking.length, function(n) {
        var data = ranking[n];
        var bookModel = data.rakutenBookModel;
    %>

    <% if (n % 2 == 0) { %>
    <div class="row product-row-block">
        <div class="col-md-12 col-lg-6">
            <% } else { %>
        </div>
        <div class="col-md-12 col-lg-6">
            <% } %>

            <div class="row shadow p-3 mb-5 bg-white rounded product-block"
                 data-book-caption="<%= data.bookCaptionModel ? data.bookCaptionModel.getCaption() : '' %>">
                <div class="col-4 product-col">
                    <div class="product-info">

                        <div class="row d-flex align-items-center rank-area">
                            <% if (data.rank <= 3) { %>
                                <img src="/img/ranking/rank_<%= data.rank %>_crown.png" class="rank-crown-img">
                                <div class="col-12 rank-text absolute-position">
                                    第
                                    <span class="rank-num best-3-rank-num"><%= data.rank %></span>
                                    位
                                </div>

                            <% } else { %>
                                <div class="col-12 rank-text">
                                    第
                                    <span class="rank-num <%= data.rank <= 3 ? 'best-3-rank-img' : '' %>"><%= data.rank %></span>
                                    位
                                </div>
                            <% } %>
                        </div>

                        <span class="tweet-count">
                            <%= data.tweetCount %>
                        </span>
                        <span class="tweet-count-suffix">
                            ツイート
                        </span>
                        <br>

                        <a href="<%= bookModel.getImageURLBase() %>" class="zoomable-image">
                            <img src="<%= bookModel.getImageURLBase() %>" class="img-fluid book-img">
                        </a>

                        <br>
                        <p class="product-title">
                            <%= bookModel.getTitle() %>
                        </p>

                        <span>
                            <%= bookModel.getSaleDateStr() %> 発売
                        </span>

                        <a href="<%= bookModel.getAffiliateURL() %>" target="_blank" class="btn btn-danger">楽天ブックス</a>
                    </div>
                </div>

                <%
                    var initialDisplayTweets = data.rank <= 10 ? __.first(data.tweetModels, 3) : [];
                    var dataAttrStr = __.map(data.tweetModels, function (tweetModel) {
                        return '["' + tweetModel.getScreenName() + '","' + tweetModel.getId() + '"]';
                    }).join(',');
                %>

                <div class="col-8 tweet-references">
                    <div class="twitter-reaction-loading">
                        <span class="spinner-border text-primary" role="status" aria-hidden="true"></span>
                    </div>

                    <div class="grad-wrap">
                        <button class="btn btn-success btn-lg grad-trigger"
                                type="button"
                                data-read-more-tweet-ids="[<%= dataAttrStr %>]">
                            <%= data.rank <= 10 ? '続きを読む' : 'Twitterの反応を見る' %>
                        </button>

                        <div class="grad-item" data-grad-idx="<%= data.rank %>"
                             data-is-first-render=<%= data.rank <= 10 ? 'true' : 'false' %>>

                            <% if (data.rank <= 10) { %>
                                <% __.each(initialDisplayTweets, function(tweetModel) { %>
                                    <blockquote class="twitter-tweet" data-lang="ja" data-cards="hidden">
                                        <a href="https://twitter.com/<%= tweetModel.getScreenName() %>/status/<%= tweetModel.getId() %>"></a>
                                    </blockquote>
                                <% }); %>
                            <% } else { %>
                                <img src="/img/mosaic_tweet_list.png" class="mosaic-tweet-list-img">
                            <% } %>

                        </div>
                    </div>
                </div>
            </div>

            <% if (n % 2 == 0) {
            } else { %>
        </div>
    </div>
    <% }}); %>

</div>


</body>
</html>

<script src="/js/book_ranking/compressed/index.min.js" type="text/javascript"></script>
